
<!DOCTYPE html>
<html>
<head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>OpenRPA & OpenFlow queues &mdash; My KDB</title>

    <link rel="shortcut icon" href="../../img/favicon.ico">
    <link rel="stylesheet" href="../../css/alabaster.css" type="text/css">
    <link rel="stylesheet" href="../../css/alabaster-overrides.css" type="text/css">

    

    
      <script src="../../search/main.js"></script>
    

    

    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    
  
</head>
<body>

  <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
            <h1 id="openrpa-openflow-queues">OpenRPA &amp; OpenFlow queues</h1>
<h1 id="howto-use-openflow-queues">HowTo use OpenFlow queues</h1>
<h2 id="abstract">Abstract</h2>
<p>OpenFlow - is a midddleware and web GUI that, among other things, provide an interface to the RabbitMQ queue system under the hood.</p>
<p>In case if queue processing is required (e.g. to do a web scraping without getting blocked) an OpenFlow feature 'work item queues' shall be used.</p>
<p>On a high level, the idea is that you create and configure the queue on OpenFlow and then you use it through the Node-Red special nodes, that push things to be processed to the queue and pick them up from the queue, with respect to the queue settings.</p>
<h2 id="how-to">How To</h2>
<p>Go to your OpenFlow - the URL is provided for the cloud version of the OpenFlow: <a href="https://app.openiap.io/#/WorkitemQueues">https://app.openiap.io/#/WorkitemQueues</a></p>
<p>Create your Node-Red workflow:</p>
<ol>
<li>Create new flow</li>
<li>Drag &amp; drop flows.json to the screen</li>
</ol>
<p><strong>flows.json</strong></p>
<pre><code>[
    {
        &quot;id&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;type&quot;: &quot;tab&quot;,
        &quot;label&quot;: &quot;Flow 2&quot;,
        &quot;disabled&quot;: false,
        &quot;info&quot;: &quot;&quot;,
        &quot;env&quot;: []
    },
    {
        &quot;id&quot;: &quot;0b70677bdf79a2f6&quot;,
        &quot;type&quot;: &quot;amqp consumer&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;queue&quot;: &quot;ExampleConsumer&quot;,
        &quot;name&quot;: &quot;&quot;,
        &quot;config&quot;: &quot;&quot;,
        &quot;x&quot;: 120,
        &quot;y&quot;: 420,
        &quot;wires&quot;: [
            [
                &quot;12934d253ab2cd38&quot;,
                &quot;dc2956d45bdbe3da&quot;
            ]
        ]
    },
    {
        &quot;id&quot;: &quot;12934d253ab2cd38&quot;,
        &quot;type&quot;: &quot;workitem popworkitem&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;name&quot;: &quot;&quot;,
        &quot;download&quot;: true,
        &quot;config&quot;: &quot;602e936b1a66635f&quot;,
        &quot;workitem&quot;: &quot;payload&quot;,
        &quot;workitemtype&quot;: &quot;msg&quot;,
        &quot;files&quot;: &quot;files&quot;,
        &quot;filestype&quot;: &quot;msg&quot;,
        &quot;x&quot;: 330,
        &quot;y&quot;: 380,
        &quot;wires&quot;: [
            [
                &quot;ff0ebbd9f0333445&quot;
            ],
            []
        ]
    },
    {
        &quot;id&quot;: &quot;ff0ebbd9f0333445&quot;,
        &quot;type&quot;: &quot;workitem updateworkitem&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;name&quot;: &quot;&quot;,
        &quot;workitem&quot;: &quot;payload&quot;,
        &quot;workitemtype&quot;: &quot;msg&quot;,
        &quot;ignoremaxretries&quot;: &quot;ignoremaxretries&quot;,
        &quot;ignoremaxretriestype&quot;: &quot;msg&quot;,
        &quot;files&quot;: &quot;newfiles&quot;,
        &quot;filestype&quot;: &quot;msg&quot;,
        &quot;error&quot;: &quot;error&quot;,
        &quot;errortype&quot;: &quot;msg&quot;,
        &quot;state&quot;: &quot;processing&quot;,
        &quot;success_wiq&quot;: &quot;ok&quot;,
        &quot;success_wiqtype&quot;: &quot;msg&quot;,
        &quot;failed_wiq&quot;: &quot;ok&quot;,
        &quot;failed_wiqtype&quot;: &quot;msg&quot;,
        &quot;x&quot;: 560,
        &quot;y&quot;: 380,
        &quot;wires&quot;: [
            [
                &quot;932e4a392dc00d8f&quot;
            ]
        ]
    },
    {
        &quot;id&quot;: &quot;4afad22c0deb0332&quot;,
        &quot;type&quot;: &quot;inject&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;name&quot;: &quot;add one&quot;,
        &quot;props&quot;: [
            {
                &quot;p&quot;: &quot;payload&quot;
            },
            {
                &quot;p&quot;: &quot;topic&quot;,
                &quot;vt&quot;: &quot;str&quot;
            },
            {
                &quot;p&quot;: &quot;files&quot;,
                &quot;v&quot;: &quot;[]&quot;,
                &quot;vt&quot;: &quot;json&quot;
            }
        ],
        &quot;repeat&quot;: &quot;&quot;,
        &quot;crontab&quot;: &quot;&quot;,
        &quot;once&quot;: false,
        &quot;onceDelay&quot;: 0.1,
        &quot;topic&quot;: &quot;Find me&quot;,
        &quot;payload&quot;: &quot;&quot;,
        &quot;payloadType&quot;: &quot;date&quot;,
        &quot;x&quot;: 100,
        &quot;y&quot;: 160,
        &quot;wires&quot;: [
            [
                &quot;1917acebabd1f212&quot;
            ]
        ]
    },
    {
        &quot;id&quot;: &quot;6648745214f82e86&quot;,
        &quot;type&quot;: &quot;debug&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;name&quot;: &quot;&quot;,
        &quot;active&quot;: true,
        &quot;tosidebar&quot;: true,
        &quot;console&quot;: false,
        &quot;tostatus&quot;: false,
        &quot;complete&quot;: &quot;payload&quot;,
        &quot;targetType&quot;: &quot;msg&quot;,
        &quot;statusVal&quot;: &quot;&quot;,
        &quot;statusType&quot;: &quot;auto&quot;,
        &quot;x&quot;: 790,
        &quot;y&quot;: 160,
        &quot;wires&quot;: []
    },
    {
        &quot;id&quot;: &quot;8f35e0047b764ada&quot;,
        &quot;type&quot;: &quot;workitem addworkitem&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;name&quot;: &quot;&quot;,
        &quot;config&quot;: &quot;602e936b1a66635f&quot;,
        &quot;payload&quot;: &quot;payload&quot;,
        &quot;payloadtype&quot;: &quot;msg&quot;,
        &quot;topic&quot;: &quot;topic&quot;,
        &quot;topictype&quot;: &quot;msg&quot;,
        &quot;nextrun&quot;: &quot;nextrun&quot;,
        &quot;nextruntype&quot;: &quot;msg&quot;,
        &quot;priority&quot;: &quot;3&quot;,
        &quot;prioritytype&quot;: &quot;msg&quot;,
        &quot;files&quot;: &quot;files&quot;,
        &quot;filestype&quot;: &quot;msg&quot;,
        &quot;success_wiq&quot;: &quot;ok&quot;,
        &quot;success_wiqtype&quot;: &quot;msg&quot;,
        &quot;failed_wiq&quot;: &quot;ok&quot;,
        &quot;failed_wiqtype&quot;: &quot;msg&quot;,
        &quot;x&quot;: 610,
        &quot;y&quot;: 160,
        &quot;wires&quot;: [
            [
                &quot;6648745214f82e86&quot;
            ]
        ]
    },
    {
        &quot;id&quot;: &quot;1917acebabd1f212&quot;,
        &quot;type&quot;: &quot;http request&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;name&quot;: &quot;&quot;,
        &quot;method&quot;: &quot;GET&quot;,
        &quot;ret&quot;: &quot;bin&quot;,
        &quot;paytoqs&quot;: &quot;ignore&quot;,
        &quot;url&quot;: &quot;https://as1.ftcdn.net/v2/jpg/01/25/63/94/1000_F_125639489_JWy8LEJzjIDMWes5UL0XLWUZQQPBidxs.jpg&quot;,
        &quot;tls&quot;: &quot;&quot;,
        &quot;persist&quot;: false,
        &quot;proxy&quot;: &quot;&quot;,
        &quot;authType&quot;: &quot;&quot;,
        &quot;senderr&quot;: false,
        &quot;x&quot;: 270,
        &quot;y&quot;: 160,
        &quot;wires&quot;: [
            [
                &quot;40e0da21f054c529&quot;
            ]
        ]
    },
    {
        &quot;id&quot;: &quot;40e0da21f054c529&quot;,
        &quot;type&quot;: &quot;function&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;name&quot;: &quot;&quot;,
        &quot;func&quot;: &quot;msg.files = [];\nmsg.files.push( {\n    file: msg.payload,\n    filename: \&quot;kitten.jpg\&quot;\n})\nmsg.payload = {\&quot;name\&quot;: \&quot;hi mom\&quot;}\nreturn msg;&quot;,
        &quot;outputs&quot;: 1,
        &quot;noerr&quot;: 0,
        &quot;initialize&quot;: &quot;&quot;,
        &quot;finalize&quot;: &quot;&quot;,
        &quot;libs&quot;: [],
        &quot;x&quot;: 440,
        &quot;y&quot;: 160,
        &quot;wires&quot;: [
            [
                &quot;8f35e0047b764ada&quot;
            ]
        ]
    },
    {
        &quot;id&quot;: &quot;dc2956d45bdbe3da&quot;,
        &quot;type&quot;: &quot;amqp acknowledgment&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;name&quot;: &quot;&quot;,
        &quot;x&quot;: 330,
        &quot;y&quot;: 500,
        &quot;wires&quot;: [
            []
        ]
    },
    {
        &quot;id&quot;: &quot;677ba3e1a244ff44&quot;,
        &quot;type&quot;: &quot;catch&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;d&quot;: true,
        &quot;name&quot;: &quot;&quot;,
        &quot;scope&quot;: null,
        &quot;uncaught&quot;: false,
        &quot;x&quot;: 720,
        &quot;y&quot;: 260,
        &quot;wires&quot;: [
            [
                &quot;46c3a83a0f9d092f&quot;,
                &quot;d41561e1802fee9a&quot;
            ]
        ]
    },
    {
        &quot;id&quot;: &quot;46c3a83a0f9d092f&quot;,
        &quot;type&quot;: &quot;workitem updateworkitem&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;name&quot;: &quot;&quot;,
        &quot;workitem&quot;: &quot;payload&quot;,
        &quot;workitemtype&quot;: &quot;msg&quot;,
        &quot;ignoremaxretries&quot;: &quot;ignoremaxretries&quot;,
        &quot;ignoremaxretriestype&quot;: &quot;msg&quot;,
        &quot;files&quot;: &quot;newfiles&quot;,
        &quot;filestype&quot;: &quot;msg&quot;,
        &quot;error&quot;: &quot;error&quot;,
        &quot;errortype&quot;: &quot;msg&quot;,
        &quot;state&quot;: &quot;successful&quot;,
        &quot;success_wiq&quot;: &quot;go&quot;,
        &quot;success_wiqtype&quot;: &quot;msg&quot;,
        &quot;failed_wiq&quot;: &quot;go&quot;,
        &quot;failed_wiqtype&quot;: &quot;msg&quot;,
        &quot;x&quot;: 920,
        &quot;y&quot;: 280,
        &quot;wires&quot;: [
            []
        ]
    },
    {
        &quot;id&quot;: &quot;932e4a392dc00d8f&quot;,
        &quot;type&quot;: &quot;debug&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;name&quot;: &quot;&quot;,
        &quot;active&quot;: true,
        &quot;tosidebar&quot;: true,
        &quot;console&quot;: false,
        &quot;tostatus&quot;: false,
        &quot;complete&quot;: &quot;payload&quot;,
        &quot;targetType&quot;: &quot;msg&quot;,
        &quot;statusVal&quot;: &quot;&quot;,
        &quot;statusType&quot;: &quot;auto&quot;,
        &quot;x&quot;: 770,
        &quot;y&quot;: 380,
        &quot;wires&quot;: []
    },
    {
        &quot;id&quot;: &quot;d41561e1802fee9a&quot;,
        &quot;type&quot;: &quot;debug&quot;,
        &quot;z&quot;: &quot;bf28ac2e8d1a039b&quot;,
        &quot;name&quot;: &quot;ERROR&quot;,
        &quot;active&quot;: true,
        &quot;tosidebar&quot;: true,
        &quot;console&quot;: false,
        &quot;tostatus&quot;: false,
        &quot;complete&quot;: &quot;error&quot;,
        &quot;targetType&quot;: &quot;msg&quot;,
        &quot;statusVal&quot;: &quot;&quot;,
        &quot;statusType&quot;: &quot;auto&quot;,
        &quot;x&quot;: 900,
        &quot;y&quot;: 240,
        &quot;wires&quot;: []
    },
    {
        &quot;id&quot;: &quot;602e936b1a66635f&quot;,
        &quot;type&quot;: &quot;iworkitemqueue-config&quot;,
        &quot;wiq&quot;: &quot;ExampleQueue&quot;,
        &quot;wiqid&quot;: &quot;&quot;,
        &quot;name&quot;: &quot;&quot;
    }
]
</code></pre>
<ol>
<li>Verify your 'Add Workitem' node has config 'ExampleQueue' -&gt; that's a name of the queue at OpenFlow side (Edit Add Workitem node -&gt; Properties -&gt; Config -&gt; ExampleQueue)</li>
<li>On 'ampq consumer' make sure the queue name is 'ExampleConsumer' -&gt; that's a name of the RabbitMQ queue under the hood (Edit amqp consumer node -&gt; Properties -&gt; Queue name -&gt; ExampleConsumer)</li>
<li>Click 'Deploy'</li>
<li>Go the queue creation at OpenFlow</li>
</ol>
<p>Create your queue: Work item queues -&gt; ExampleQueue)</p>
<ol>
<li>Fill in 'Name' - ideally with a name without spaces, you will need it later at the Node-Red node configuration</li>
<li>Choose project, workflow &amp; robot (fetches from the one created at OpenRPA)</li>
<li>choose 'amqpqueue' (comes from Node-Red nodes configuration)</li>
</ol>
<p>Go back to Node-Red and verify that all of the nodes configuration is in order</p>
<p>Start your flow and go immediately to <a href="https://app.openiap.io/#/Workitems">https://app.openiap.io/#/Workitems</a> - you shall find 'Find me' item with status 'Processing' which shall change to 'successful' after a few seconds, which means, that the item has been pushed to the queue by the first flow, then picked up by a second flow and a status has been changed to 'successful'.</p>
<p>Feel free to modify the logic as you see fit!</p>
<p>More information could be found at <a href="https://github.com/open-rpa/openrpa/wiki/Workitems">https://github.com/open-rpa/openrpa/wiki/Workitems</a></p>
            
          
        </div>
      </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
        
          
            
  <h1 class="logo"><a href="../..">My KDB</a></h1>



          
            



<h3>Table Of Contents</h3>

<nav>
  
  
    <ul>
    
  </ul>
  
    <ul>
    
      <li><a href="#abstract">Abstract</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#how-to">How To</a></li>
      <ul>
    
  </ul>
    
  </ul>
  

  
</nav>
          
            
  <h3>Related Topics</h3>
  <ul>
    
      <li>Previous: <a href="../../Journal/Travel%20%D0%A0%D0%B5%D0%B9%D1%81%20%D0%A1%D0%B0%D0%BD%D0%BA%D1%82-%D0%9F%D0%B5%D1%82%D0%B5%D1%80%D0%B1%D1%83%D1%80%D0%B3%20-%20%D0%A6%D1%8E%D1%80%D0%B8%D1%85%20%28%D0%B3%D0%BE%D0%B4%D0%B0%202006%20-%202010%29/" title="previous chapter">
        Рейс Санкт-Петербург - Цюрих
      </a></li>
    
    
      <li>Next: <a href="../SW%20hand-over%20requirements/" title="next chapter">
        Generic SW project hand-over
      </a></li>
    
  </ul>

          
            <div id="searchbox" style="display: none;" role="search">
  <h3>Quick search</h3>
  <form class="search" action="../../search.html" method="get">
    <input name="q" type="text">
    <input value="Go" type="submit">
  </form>
  <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
  </p>
</div>
<script type="text/javascript">
  document.getElementById("searchbox").style.display = "block";
</script>
          
        
      </div>
    </div>
    <div class="clearer"></div>
  </div>

  
    <div class="footer">
      
      
        
        Powered by <a href="http://www.mkdocs.org">mkdocs 1.4.2</a>
        &amp; <a href="https://github.com/iamale/mkdocs-alabaster">mkdocs-alabaster</a>
      
    </div>
  

  <!--
  MkDocs version      : 1.4.2
  Docs Build Date UTC : 2022-11-29 15:13:35.218363+00:00
  -->
</body>
</html>