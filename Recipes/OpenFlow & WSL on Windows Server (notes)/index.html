
<!DOCTYPE html>
<html>
<head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>OpenFlow & WSL on Windows Server (notes) &mdash; My KDB</title>

    <link rel="shortcut icon" href="../../img/favicon.ico">
    <link rel="stylesheet" href="../../css/alabaster.css" type="text/css">
    <link rel="stylesheet" href="../../css/alabaster-overrides.css" type="text/css">

    

    
      <script src="../../search/main.js"></script>
    

    

    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    
  
</head>
<body>

  <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
            <ul>
<li>choose Windows with containers (enable key to use to decrypt the Administrator's password) on metal </li>
<li>Install security updates</li>
<li>install https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi</li>
<li>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</li>
<li>wsl --install # this might fail, it's Ok, if next command is successfull</li>
<li>wsl --set-default-version 2</li>
<li>wsl --list --online # to view the distros available</li>
<li>wsl --install -d Ubuntu-18.04</li>
<li>apply DNS solution as per <a href="https://superuser.com/questions/1533291/how-do-i-change-the-dns-settings-for-wsl2">this article</a><br />
git clone https://github.com/open-rpa/docker.git<br />
cd docker<br />
docker-compose -f docker-compose-traefik.yml -p openrpa up -d</li>
<li>open http://localhost.openiap.io/#/Login and login with the name that you want to be an admin, each nodered started inside openflow, will be listening at username.localhost.openiap.io (as per <a href="https://github.com/open-rpa/docker">doc</a>)</li>
<li>follow the instruction at https://docs.openiap.io/openflow.html</li>
</ul>
<p>Articles:<br />
- https://techcommunity.microsoft.com/t5/itops-talk-blog/wsl2-now-available-on-windows-server-2022/ba-p/3447570<br />
- https://stackoverflow.com/questions/46248193/how-can-i-run-docker-in-a-aws-windows-server-environment<br />
- https://stackoverflow.com/questions/71379361/how-can-i-run-docker-desktop-in-an-aws-ec2-windows-server-environment<br />
- https://docs.microsoft.com/en-us/windows/wsl/install-on-server</p>
<h1 id="aws-steps">AWS steps</h1>
<ul>
<li>choose Windows with containers (enable key to use to decrypt the Administrator's password) on metal</li>
<li>Install security updates</li>
<li>Start PowerShell</li>
</ul>
<p>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</p>
<p>install <a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi">https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi</a></p>
<pre><code>wsl --install # this might fail, it's Ok, if next command is successfull
wsl --set-default-version 2
wsl --list --online
wsl --install -d Ubuntu-18.04
</code></pre>
<p>for a Windows 10 or Windows 2022 server - apply DNS solution as per <a href="https://superuser.com/questions/1533291/how-do-i-change-the-dns-settings-for-wsl2">this article</a></p>
<p><code>wget -O - [https://raw.githubusercontent.com/Potemkin-Co/quicky/main/docker\_ubuntu.sh](https://raw.githubusercontent.com/Potemkin-Co/quicky/main/docker_ubuntu.sh) | bash</code></p>
<p>this can fail during inability to choose 'yes' or 'no' - in this case `wsl --terminate Ubuntu-18.04` followed by `wsl -d Ubuntu-18.04` and `sudo dpkg --configure -a`, followed by running the command again</p>
<pre><code>wget [https://raw.githubusercontent.com/alexander-potemkin/quickies/main/nonprod-openrpa-openflow.yml](https://raw.githubusercontent.com/alexander-potemkin/quickies-dockers/main/nonprod-openrpa-openflow.yml)
sudo service docker start
sudo curl -SL [https://github.com/docker/compose/releases/download/v2.6.1/docker-compose-linux-x86\_64](https://github.com/docker/compose/releases/download/v2.6.1/docker-compose-linux-x86_64) -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose
docker-compose --version
sudo docker-compose -f nonprod-openrpa-openflow.yml -p openrpa up -d
</code></pre>
<p>open <a href="http://localhost.openiap.io/#/Login">http://localhost.openiap.io/#/Login</a> and login with the name that you want to be an admin, each nodered started inside openflow, will be listening at <a href="http://username.localhost.openiap.io">username.localhost.openiap.io</a> (as per <a href="https://github.com/open-rpa/docker">doc</a>)</p>
<p>at Node-Red settings - mark auto-create check box to enable it the auto-start</p>
<p><code>sudo vi /etc/wsl.conf</code> - add at <code>[boot]</code> section<br />
<code>command="service docker start"</code></p>
<p>right click on Windows icon -&gt; Run<br />
enter `shell:startup`<br />
choose shortcut -&gt; enter `wsl -d Ubuntu-18.04` in the shortcut</p>
<p>Starting OpenRPA</p>
<p>using taskmanager start OpenRPA installation file as an administrator</p>
<p>$user\Documents\OpenRPA\settings.json - change app to localhost and wss to ws - make sure the file is saved!!</p>
<p><strong>Notes</strong></p>
<p>- docker-compose v1 man: <a href="https://docs.docker.com/engine/reference/commandline/compose_up/">https://docs.docker.com/engine/reference/commandline/compose_up/</a></p>
<p>- if the Docker won't start automatically, add WSL to the auto-start: <a href="https://www.reddit.com/r/bashonubuntuonwindows/comments/rb03b7/how_to_start_wsl2_automatically_on_boot_in/">https://www.reddit.com/r/bashonubuntuonwindows/comments/rb03b7/how_to_start_wsl2_automatically_on_boot_in/</a></p>
<p><a href="https://superuser.com/questions/1112007/how-to-run-ubuntu-service-on-windows-at-startup">https://superuser.com/questions/1112007/how-to-run-ubuntu-service-on-windows-at-startup</a></p>
            
          
        </div>
      </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
        
          
            
  <h1 class="logo"><a href="../..">My KDB</a></h1>



          
            



<h3>Table Of Contents</h3>

<nav>
  
  
    <ul>
    
  </ul>
  

  
</nav>
          
            
  <h3>Related Topics</h3>
  <ul>
    
      <li>Previous: <a href="../OpenFire/" title="previous chapter">
        OpenFire
      </a></li>
    
    
      <li>Next: <a href="../OpenRPA%20%26%20OpenFlow%20queues/" title="next chapter">
        HowTo use OpenFlow queues
      </a></li>
    
  </ul>

          
            <div id="searchbox" style="display: none;" role="search">
  <h3>Quick search</h3>
  <form class="search" action="../../search.html" method="get">
    <input name="q" type="text">
    <input value="Go" type="submit">
  </form>
  <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
  </p>
</div>
<script type="text/javascript">
  document.getElementById("searchbox").style.display = "block";
</script>
          
        
      </div>
    </div>
    <div class="clearer"></div>
  </div>

  
    <div class="footer">
      
      
        
        Powered by <a href="http://www.mkdocs.org">mkdocs 1.4.2</a>
        &amp; <a href="https://github.com/iamale/mkdocs-alabaster">mkdocs-alabaster</a>
      
    </div>
  

  <!--
  MkDocs version      : 1.4.2
  Docs Build Date UTC : 2022-11-29 15:13:35.272626+00:00
  -->
</body>
</html>