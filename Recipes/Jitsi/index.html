
<!DOCTYPE html>
<html>
<head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Jitsi &mdash; My KDB</title>

    <link rel="shortcut icon" href="../../img/favicon.ico">
    <link rel="stylesheet" href="../../css/alabaster.css" type="text/css">
    <link rel="stylesheet" href="../../css/alabaster-overrides.css" type="text/css">

    

    
      <script src="../../search/main.js"></script>
    

    

    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    
  
</head>
<body>

  <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
            <h1 id="jitsi">Jitsi</h1>
<p>Jitsi's config files are at <code>/etc/prosody</code> (as per <a href="https://jitsi.github.io/handbook/docs/devops-guide/devops-guide-manual">this page</a>).</p>
<p>Prepare clean empty server, that will only do the Jitsi conference for the people.</p>
<p>This guide follows scripted installation as per <a href="https://github.com/jitsi-contrib/installers/tree/main/jitsi-base">this page</a>.</p>
<p>Create A DNS records for  this server.</p>
<aside>
ðŸ’¡ If server's memory is less than 8Gb, you might want to comment out 126 line of the script, that do 'exit' after that check.

</aside>

<pre><code class="language-bash">lsb_release -a # verify it's Ubuntu 20.04
sudo apt install wget
sudo apt-get update
sudo su -l
export JITSI_HOST=domain.com
export TURN_HOST=domain.com
wget -T 10 -O jitsi-base-installer https://raw.githubusercontent.com/jitsi-contrib/installers/main/jitsi-base/jitsi-base-installer
vi jitsi-base-installer # go to line 126 and disable exit
bash jitsi-base-installer
</code></pre>
<hr />
<h1 id="drafts-not-working">Drafts; not working</h1>
<h1 id="coturn-server-install">coTURN server install</h1>
<p>Prepare DNS name and fixed IP address.</p>
<p>On Ubuntu 18.04 SSH to the server and go (as per <a href="https://rajbharathmail.medium.com/create-stun-turn-server-in-ubuntu-18-04-aws-a59ef49c7659">article</a>):</p>
<pre><code class="language-bash">sudo apt-get -y  update &amp;&amp;\
sudo apt-get -y install software-properties-common &amp;&amp;\
sudo add-apt-repository -y universe &amp;&amp;\
sudo add-apt-repository -y ppa:certbot/certbot &amp;&amp;\
sudo apt-get -y update &amp;&amp;\

sudo apt-get -y install coturn certbot

sudo certbot certonly --standalone #prepare DNS name &amp; e-mail address

sudo vi /etc/default/coturn #TURNSERVER_ENABLED =&gt; 1
</code></pre>
<p>On Ubuntu 20.04:</p>
<pre><code class="language-bash">sudo apt-get -y  update &amp;&amp;\
sudo apt-get -y install software-properties-common &amp;&amp;\
sudo add-apt-repository -y universe

sudo apt-add-repository -r ppa:certbot/certbot #confirm with ENTER
sudo apt-get -y update
sudo apt-get -y install coturn certbot

sudo certbot certonly --standalone #put **both** DNS names &amp; e-mail address

sudo vi /etc/default/coturn #TURNSERVER_ENABLED =&gt; 1
</code></pre>
<p><code>sudo cp /etc/turnserver.conf /etc/turnserver.conf.backup &amp;&amp; sudo vi /etc/turnserver.conf</code>: </p>
<pre><code class="language-bash">server-name=coturn.uturn.domain.com
cert=/etc/letsencrypt/live/uturn.domain.com/cert.pem
pkey=/etc/letsencrypt/live/uturn.domain.com/privkey.pem
realm=uturn.domain.com
fingerprint
listening-ip=0.0.0.0
external-ip=IP
listening-port=443
min-port=10000
max-port=20000
log-file=/var/log/turnserver.log
verbose
#user=&lt;YOUR_USERNAME&gt;:&lt;YOUR_PASSWORD&gt;
lt-cred-mech
</code></pre>
<p>followed by:</p>
<pre><code class="language-bash">sudo service coturn restart &amp;&amp; sudo service --status-all | grep coturn
</code></pre>
<p>Then test (as per <a href="https://ourcodeworld.com/articles/read/1526/how-to-test-online-whether-a-stun-turn-server-is-working-properly-or-not">the page</a>) by going to <a href="https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/">https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice</a>, adding <code>sturn:uturn.domain.com:443</code>(protocol:domain:port) as a DNS name.</p>
<p>Then, click on "Gather candidates", wait until srflx candidate type to show up, which would confirm that a STUN server works fine.</p>
<h1 id="jitsi-server-installation">Jitsi server installation</h1>
<p>Quick install without Docker, as per the <a href="https://jitsi.github.io/handbook/docs/devops-guide/devops-guide-quickstart">page</a>.</p>
<p>Setup Ubuntu 18.04 and a DNS name linked to the server static IP address.</p>
<p>Execute the following commands on it:</p>
<pre><code class="language-bash">sudo apt update
sudo apt install apt-transport-https
sudo apt-add-repository universe
sudo apt update
sudo hostnamectl set-hostname meet.example.org
sudo bash
echo $(output=($(host $(hostname)));echo ${output[3]}) $(hostname) &gt;&gt; /etc/hosts &amp;&amp; exit

</code></pre>
<p>When under CapRover - config is at <code>/config</code> (inside the Docker).</p>
<p>By default, Mute is after 10 people - turned to <code>false</code></p>
<p>Troubleshooting guide: <a href="https://community.jitsi.org/t/troubleshooting-steps-jitsi-meet-also-jibri-my-comprehensive-tips-for-the-beginner/38751">https://community.jitsi.org/t/troubleshooting-steps-jitsi-meet-also-jibri-my-comprehensive-tips-for-the-beginner/38751</a></p>
            
          
        </div>
      </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
        
          
            
  <h1 class="logo"><a href="../..">My KDB</a></h1>



          
            



<h3>Table Of Contents</h3>

<nav>
  
  
    <ul>
    
  </ul>
  
    <ul>
    
  </ul>
  
    <ul>
    
  </ul>
  
    <ul>
    
  </ul>
  

  
</nav>
          
            
  <h3>Related Topics</h3>
  <ul>
    
      <li>Previous: <a href="../InvizBox%20with%20custom%20OpenVPN%20%3Cnot%20working%21%3E/" title="previous chapter">
        InvizBox with custom OpenVPN <not working!>
      </a></li>
    
    
      <li>Next: <a href="../Kimai%20time%20tracker/" title="next chapter">
        Kamai time tracker
      </a></li>
    
  </ul>

          
            <div id="searchbox" style="display: none;" role="search">
  <h3>Quick search</h3>
  <form class="search" action="../../search.html" method="get">
    <input name="q" type="text">
    <input value="Go" type="submit">
  </form>
  <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
  </p>
</div>
<script type="text/javascript">
  document.getElementById("searchbox").style.display = "block";
</script>
          
        
      </div>
    </div>
    <div class="clearer"></div>
  </div>

  
    <div class="footer">
      
      
        
        Powered by <a href="http://www.mkdocs.org">mkdocs 1.4.2</a>
        &amp; <a href="https://github.com/iamale/mkdocs-alabaster">mkdocs-alabaster</a>
      
    </div>
  

  <!--
  MkDocs version      : 1.4.2
  Docs Build Date UTC : 2022-11-29 15:13:35.260318+00:00
  -->
</body>
</html>